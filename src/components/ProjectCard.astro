---
import { Image } from 'astro:assets'
import BaseCard from './BaseCard.astro'
import { cn, getImageGlob, validateImagePath } from '@/utils'

const {
  imagePath,
  altText,
  ...restProps
} = Astro.props

const images = getImageGlob()
validateImagePath(imagePath, images)
---

<BaseCard {...restProps} class={cn('flex flex-col gap-y-3', restProps.class)}>
  {imagePath && (
    <Image
      src={images[imagePath]()}
      alt={altText}
      class='h-48 w-full rounded-2xl rounded-bl-none rounded-br-none object-cover'
      loading='eager'
      slot="image"
    />
  )}
  <div class='flex flex-col gap-y-0.5 px-5 py-4'>
    <slot />
  </div>
</BaseCard>