---
import { Image } from 'astro:assets'
import BaseCard from './BaseCard.astro'
import { cn, getImageGlob, validateImagePath } from '@/utils'

const {
  imagePath,
  altText,
  imageClass,
  ...restProps
} = Astro.props

const images = getImageGlob()
validateImagePath(imagePath, images)
---

<BaseCard {...restProps} class={cn('relative px-5 py-3', restProps.class)}>
  {imagePath && (
    <Image
      src={images[imagePath]()}
      alt={altText}
      class={cn('mb-3 md:absolute md:mb-0', imageClass)}
      loading='eager'
      slot="image"
    />
  )}
  <slot />
</BaseCard>