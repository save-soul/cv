---
import { recordConfig } from '@/config'
import PageLayout from '@/layouts/BaseLayout.astro'
import RecordCard from '@/components/RecordCard.astro'
import { getCurrentLocale, getI18nText } from '@/utils/locale'
import type { Locale } from '@/types'

interface Props {
  locale?: Locale
}

const { locale: propLocale } = Astro.props
const currentLocale = propLocale || getCurrentLocale(Astro.url)
const recordItems = recordConfig[currentLocale]

---

<PageLayout meta={{}}>
	<div class="w-full py-2">
		<div class="mb-8">
			<h2 class="text-2xl font-bold mb-2 text-gray-900 dark:text-gray-100">{getI18nText('sections.record', currentLocale)}</h2>
			<p class="text-gray-600 dark:text-gray-400">
				{getI18nText('descriptions.record.description', currentLocale)}
			</p>
		</div>

		{/* Timeline container */}
		<div class="relative w-full">
			{/* Vertical timeline line - only visible on large screens */}
			<div class="hidden lg:block absolute left-[22%] top-0 bottom-0 w-0.5 bg-border -translate-x-1/2"></div>
			
			<div class="flex flex-col gap-y-10">
				{
					recordItems.map((item) => (
						<div class="relative flex flex-col lg:flex-row lg:items-center">
							{/* Date section - visible on all screens, left side on large screens */}
							<div class="w-full lg:w-[22%] lg:pr-8 mb-4 lg:mb-0">
								<div class="lg:sticky lg:top-8 lg:text-right lg:h-full lg:flex lg:items-center lg:justify-end">
									<h2 class="text-lg font-semibold text-foreground text-balance">{item.date}</h2>
								</div>
							</div>
							
							{/* Timeline node - only visible on large screens, vertically centered between date and card */}
							<div class="hidden lg:flex absolute left-[22%] w-4 h-4 rounded-full bg-card border-2 border-foreground z-10 -translate-x-1/2"></div>
							
							{/* Card section - right side on large screens */}
							<div class="w-full lg:w-[78%] lg:pl-8">
								<RecordCard
									heading={item.title}
									subheading={item.description}
									date={item.date}
								/>
							</div>
						</div>
					))
				}
			</div>
		</div>
	</div>
</PageLayout>
